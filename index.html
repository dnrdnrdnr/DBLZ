<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#3d3d3d" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>아이젠하워 계획 다이어리</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <!-- 상단 고정 탭 배너: 쏟아내기 · 매트릭스 · 계획 및 정리 · 실행 (블록 하이라이트 + 드래그 이동) -->
    <header class="top-tabs-banner">
      <div class="tabs-track" id="tabsTrack">
        <span class="tab-block" id="tabBlock"><span class="tab-block-handle" id="tabBlockHandle"></span></span>
        <button type="button" class="view-tab active" data-view="brainDump">쏟아내기</button>
        <button type="button" class="view-tab" data-view="clarify">명확화</button>
        <button type="button" class="view-tab" data-view="matrix">매트릭스</button>
        <button type="button" class="view-tab" data-view="plan">계획 및 정리</button>
        <button type="button" class="view-tab" data-view="execution">실행</button>
      </div>
    </header>

    <!-- 본문: 모바일에서 스와이프 시 화면 전환 -->
    <main class="app-main">
    <div class="views-scroll" id="viewsScroll">
    <!-- 매일 쏟아내기 화면 -->
    <div id="brainDumpView" class="view active">
      <section class="brain-dump-section">
        <div class="brain-dump-layout">
          <div class="brain-dump-main" id="brainDumpMain">
            <h2>매일 쏟아내기</h2>
            <div class="date-picker-row">
              <span class="brain-dump-date-text" id="brainDumpDateText"></span>
              <button type="button" id="brainDumpDateBtn" class="date-picker-btn" title="날짜 선택">
                <span id="brainDumpDateBtnLabel">오늘</span>
              </button>
            </div>
            <p class="subtitle" id="brainDumpSubtitle">테스크를 적고 추가한 뒤, 날짜 버튼을 눌러 다른 날을 확인할 수 있어요</p>
            <div class="brain-dump-input" id="brainDumpInputWrap">
              <textarea id="brainDumpInput" placeholder="테스크 입력 후 Enter 또는 추가&#10;예: 보고서 작성, 회의 준비"></textarea>
              <button id="addBrainDumpBtn" class="btn-primary">추가</button>
            </div>
            <div class="dump-list-block dump-list-left">
              <div class="dump-list-header">
                <h4>쏟아낸 테스크</h4>
                <div class="dump-list-actions">
                  <button id="clearBrainDumpBtn" class="btn-clear btn-small">전체 삭제</button>
                </div>
              </div>
              <ul id="brainDumpList" class="brain-dump-list-ul"></ul>
              <div class="dump-list-footer">
                <button type="button" id="clarifyBtn" class="btn-primary">명확화</button>
              </div>
            </div>
          </div>
          <aside class="brain-dump-aside">
            <div class="brain-dump-banner">
            <div class="banner-block unclassified-dump-block">
              <h4>분류 안한 테스크</h4>
              <ul id="unclassifiedDumpList" class="unclassified-dump-list"></ul>
            </div>
            <div class="banner-block classified-dump-block">
              <h4>분류된 테스크</h4>
              <ul id="classifiedDumpList" class="classified-dump-list"></ul>
            </div>
            </div>
          </aside>
        </div>
      </section>
    </div>

    <!-- 명확화 화면 (쏟아낸 테스크 분류: 우위/단기 드래그) -->
    <div id="clarifyView" class="view">
      <section class="clarify-section">
        <p id="clarifyEmptyMessage" class="clarify-empty-message" style="display: none;">명확화할 테스크가 없습니다.</p>
        <div id="clarifyContent" class="clarify-content">
          <div class="categorize-header">
            <h3 id="categorizeTitle">테스크를 드래그하여 분류하세요</h3>
            <div class="categorize-step-indicator">
              <span id="categorizeStepText">1단계: 우위 분류</span>
            </div>
          </div>
          <div class="drag-drop-container">
            <div id="leftZone" class="drop-zone">
              <div class="zone-header">
                <h4 id="leftZoneTitle">우위</h4>
                <span class="zone-count" id="leftCount">0</span>
              </div>
              <div id="leftZoneContent" class="zone-content"></div>
            </div>
            <div id="centerZone" class="center-zone">
              <div id="centerZoneContent" class="center-content"></div>
            </div>
            <div id="rightZone" class="drop-zone">
              <div class="zone-header">
                <h4 id="rightZoneTitle">열위</h4>
                <span class="zone-count" id="rightCount">0</span>
              </div>
              <div id="rightZoneContent" class="zone-content"></div>
            </div>
          </div>
          <div class="categorize-actions">
            <button id="prevStepBtn" class="btn-secondary" style="display:none;">이전 단계</button>
            <button id="nextStepBtn" class="btn-primary" disabled>다음 단계</button>
            <button id="cancelCategorizeBtn" class="btn-secondary">나가기</button>
          </div>
        </div>
      </section>
    </div>

    <!-- 사분면 화면 (쏟아내기 분류 후 테스크) -->
    <div id="matrixView" class="view">
      <section class="matrix-section">
        <div class="matrix-grid">
          <!-- 중요하고 단기 -->
          <div class="matrix-quadrant quadrant-1" data-quadrant="1">
            <div class="quadrant-header">
              <h3><span class="quadrant-title-full">우위, 단기</span><span class="quadrant-title-short">우위, 단기</span></h3>
              <span class="quadrant-header-right">
                <button type="button" class="add-todo-btn add-todo-btn-inline" data-quadrant="1">+</button>
                <span class="badge">즉시 처리</span>
              </span>
            </div>
            <div class="todo-list" data-quadrant="1"></div>
          </div>

          <!-- 중요하지만 긴급하지 않음 -->
          <div class="matrix-quadrant quadrant-2" data-quadrant="2">
            <div class="quadrant-header">
              <h3><span class="quadrant-title-full">우위, 장기</span><span class="quadrant-title-short">우위, 장기</span></h3>
              <span class="quadrant-header-right">
                <button type="button" class="add-todo-btn add-todo-btn-inline" data-quadrant="2">+</button>
                <span class="badge">계획</span>
              </span>
            </div>
            <div class="todo-list" data-quadrant="2"></div>
          </div>

          <!-- 단기 열위 -->
          <div class="matrix-quadrant quadrant-3" data-quadrant="3">
            <div class="quadrant-header">
              <h3><span class="quadrant-title-full">단기, 열위</span><span class="quadrant-title-short">단기, 열위</span></h3>
              <span class="quadrant-header-right">
                <button type="button" class="add-todo-btn add-todo-btn-inline" data-quadrant="3">+</button>
                <span class="badge">위임</span>
              </span>
            </div>
            <div class="todo-list" data-quadrant="3"></div>
          </div>

          <!-- 중요하지도 단기하지도 않음 -->
          <div class="matrix-quadrant quadrant-4" data-quadrant="4">
            <div class="quadrant-header">
              <h3><span class="quadrant-title-full">기타</span><span class="quadrant-title-short">기타</span></h3>
              <span class="quadrant-header-right">
                <button type="button" class="add-todo-btn add-todo-btn-inline" data-quadrant="4">+</button>
                <button type="button" id="clearQuadrant4Btn" class="badge badge-action" title="기타 사분면 테스크 전체 삭제">삭제</button>
              </span>
            </div>
            <div class="todo-list" data-quadrant="4"></div>
          </div>
        </div>
      </section>
    </div>

    <!-- 계획 및 정리 화면 -->
    <div id="planView" class="view">
      <section class="execution-section">
        <h2>계획 및 정리</h2>
        <p class="subtitle">테스크를 정리하고 계획을 세워보세요</p>
        <div class="execution-content">
          <p style="text-align: center; color: #999; padding: 40px;">
            계획 및 정리 기능은 준비 중입니다.
          </p>
        </div>
      </section>
    </div>

    <!-- 실행 화면 -->
    <div id="executionView" class="view">
      <section class="execution-section">
        <h2>실행</h2>
        <p class="subtitle">정리한 테스크를 실행해보세요</p>
        <div class="execution-content">
          <p style="text-align: center; color: #999; padding: 40px;">
            실행 기능은 준비 중입니다.
          </p>
        </div>
      </section>
    </div>
    </div>
    </main>

    <!-- 하단 플로팅 바: 검색 · 잡생각 · 설정 -->
    <div class="floating-bar">
      <button id="searchFloatBtn" class="floating-bar-btn" title="검색">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <span>검색</span>
      </button>
      <div id="trashButton" class="floating-bar-btn floating-bar-btn-center" title="잡생각">
        <span class="trash-button-label">잡생각</span>
        <span class="trash-count">0</span>
      </div>
      <button id="settingsFloatBtn" class="floating-bar-btn" title="설정">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
        <span>설정</span>
      </button>
    </div>
  </div>

  <!-- 테스크 추가 모달 -->
  <div id="addTodoModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>테스크 추가</h3>
      <input type="text" id="todoTextInput" placeholder="테스크를 입력하세요" />
      <div class="modal-actions">
        <button id="saveTodoBtn" class="btn-primary">저장</button>
        <button id="cancelTodoBtn" class="btn-secondary">취소</button>
      </div>
    </div>
  </div>

  <!-- 잡생각 모달 (구 휴지통) -->
  <div id="trashModal" class="modal">
    <div class="modal-content trash-modal">
      <span class="close">&times;</span>
      <h3>잡생각</h3>
      <p class="trash-subtitle">넣어둔 테스크를 확인하고 완전히 비울 수 있습니다</p>
      <div id="trashList" class="trash-list"></div>
      <div class="trash-actions">
        <button id="emptyTrashBtn" class="btn-danger">잡생각 비우기</button>
        <button id="closeTrashBtn" class="btn-primary">닫기</button>
      </div>
    </div>
  </div>

  <!-- 테스크 액션 모달 -->
  <div id="actionModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>테스크 처리</h3>
      <p id="actionTodoText"></p>
      <div class="action-buttons">
        <button class="action-btn" data-action="do">처리하기</button>
        <button class="action-btn" data-action="defer">미루기</button>
        <button class="action-btn" data-action="delegate">위임하기</button>
        <button class="action-btn" data-action="delete">삭제하기</button>
      </div>
    </div>
  </div>

  <!-- 날짜 선택 팝업 (쏟아내기 화면) -->
  <div id="datePickerModal" class="modal">
    <div class="modal-content date-picker-modal">
      <span class="close date-picker-close">&times;</span>
      <h3>날짜 선택</h3>
      <div id="brainDumpCalendarWrap" class="brain-dump-calendar-wrap"></div>
    </div>
  </div>

  <!-- 분류 모달 (미사용: 명확화 탭으로 대체) -->
  <div id="categorizeModal" class="modal" aria-hidden="true"></div>

  <!-- 검색 모달 -->
  <div id="searchModal" class="modal">
    <div class="modal-content search-modal">
      <span class="close">&times;</span>
      <h3>검색</h3>
      <div class="search-input-wrap">
        <input type="text" id="searchInput" placeholder="테스크 이름으로 검색..." autocomplete="off">
      </div>
      <div id="searchResults" class="search-results"></div>
    </div>
  </div>

  <!-- 설정 모달 -->
  <div id="settingsModal" class="modal">
    <div class="modal-content settings-modal">
      <span class="close">&times;</span>
      <h3>설정</h3>
      <div class="settings-list">
        <div class="settings-item">
          <label for="settingDarkMode">다크 모드</label>
          <input type="checkbox" id="settingDarkMode">
        </div>
        <div class="settings-item">
          <label>데이터 관리</label>
          <div class="settings-item-actions">
            <button id="exportDataBtn" class="btn-secondary btn-small">내보내기</button>
            <button id="importDataBtn" class="btn-secondary btn-small">가져오기</button>
            <input type="file" id="importFileInput" accept=".json" style="display:none">
          </div>
        </div>
        <div class="settings-item">
          <label>전체 초기화</label>
          <button id="resetAllBtn" class="btn-danger btn-small">초기화</button>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>

